<!DOCTYPE html>
<html lang="{{ current_lang }}" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ article.title }} | KANSOTEX</title>
    <meta name="description" content="{{ article.meta_description or article.excerpt }}">
    {% if article.meta_keywords %}<meta name="keywords" content="{{ article.meta_keywords }}">{% endif %}
    
    <!-- Open Graph -->
    <meta property="og:title" content="{{ article.meta_title or article.title }}">
    <meta property="og:description" content="{{ article.meta_description or article.excerpt }}">
    {% if article.featured_image %}<meta property="og:image" content="{{ article.featured_image.url }}">{% endif %}
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        .article-content h2 { font-size: 1.875rem; font-weight: bold; margin: 2rem 0 1rem; color: var(--accent-light); }
        .article-content p { margin: 1rem 0; line-height: 1.75; }
        .article-content ul, .article-content ol { margin: 1rem 0; padding-left: 2rem; }
        .article-content li { margin: 0.5rem 0; }
    </style>
</head>
<body class="bg-black text-gray-100" data-theme="{{ color_theme }}" data-theme-mode-server="{{ theme_mode }}" data-allow-user-toggle="{{ 'true' if allow_user_toggle else 'false' }}" data-theme-mode="{{ theme_mode }}">
    
    <!-- Header / Navigation -->
    <header id="main-header" class="fixed top-0 left-0 right-0 z-50 border-b border-accent-faint transition-all duration-300 bg-black bg-opacity-95">
        <nav class="container mx-auto px-6 py-4 max-w-6xl">
            <div class="flex items-center justify-between">
                <a href="/{{ current_lang }}" class="text-2xl font-bold text-accent">KANSOTEX</a>
                <a href="/{{ current_lang }}/blog" class="text-sm font-semibold text-gray-300 hover-text-accent transition">
                    <i class="fas fa-arrow-left mr-2"></i>{% if current_lang == 'en' %}All Articles{% else %}Tous les Articles{% endif %}
                </a>
            </div>
        </nav>
    </header>

    <!-- Article Header -->
    <article class="pt-32 pb-12 px-6">
        <div class="container mx-auto max-w-4xl">
            <!-- Article Meta -->
            <div class="flex items-center gap-4 mb-6">
                {% if article.category %}
                <span class="text-sm font-semibold px-4 py-2 rounded-full bg-accent-subtle text-accent">{{ article.category }}</span>
                {% endif %}
                {% if article.published_at %}
                <span class="text-gray-400">{{ article.published_at[:10] }}</span>
                {% endif %}
                {% if article.author_name %}
                <span class="text-gray-400">{% if current_lang == 'en' %}By{% else %}Par{% endif %} {{ article.author_name }}</span>
                {% endif %}
                {% if article.view_count %}
                <span class="text-gray-400"><i class="fas fa-eye mr-1"></i>{{ article.view_count }}</span>
                {% endif %}
            </div>

            <!-- Article Title -->
            <h1 class="text-4xl md:text-5xl font-bold mb-6 leading-tight">{{ article.title }}</h1>

            <!-- Featured Image -->
            {% if article.featured_image %}
            <div class="relative overflow-hidden rounded-lg mb-8 h-96">
                <img src="{{ article.featured_image.url }}" alt="{{ article.title }}" class="w-full h-full object-cover">
            </div>
            {% endif %}

            <!-- Article Content -->
            <div class="article-content text-lg text-gray-300">
                {{ article.content | safe }}
            </div>

            <!-- Tags -->
            {% if article.tags %}
            <div class="flex flex-wrap gap-2 mt-8 pt-8 border-t border-gray-700">
                <span class="text-sm text-gray-400 mr-2"><i class="fas fa-tags"></i> {% if current_lang == 'en' %}Tags:{% else %}Tags:{% endif %}</span>
                {% for tag in article.tags %}
                <span class="text-sm px-3 py-1 rounded-full border border-accent-subtle text-gray-300">{{ tag }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </article>

    <!-- Related Articles -->
    {% if related_articles %}
    <section class="py-12 px-6 bg-gray-900 bg-opacity-50">
        <div class="container mx-auto max-w-6xl">
            <h2 class="text-3xl font-bold mb-8">{% if current_lang == 'en' %}Related Articles{% else %}Articles Connexes{% endif %}</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                {% for related in related_articles %}
                <div class="card group cursor-pointer" onclick="window.location.href='/{{ current_lang }}/blog/{{ related.slug }}'">
                    {% if related.featured_image %}
                    <div class="relative overflow-hidden rounded-lg mb-3 h-40">
                        <img src="{{ related.featured_image.url }}" alt="{{ related.title }}" class="w-full h-full object-cover transform group-hover:scale-110 transition duration-500">
                    </div>
                    {% endif %}
                    <h3 class="text-xl font-bold mb-2 group-hover:text-accent transition">{{ related.title }}</h3>
                    {% if related.excerpt %}
                    <p class="text-gray-400 text-sm line-clamp-2">{{ related.excerpt }}</p>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
    {% endif %}

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
