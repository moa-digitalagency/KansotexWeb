{% extends "admin/base.html" %}

{% block title %}Tableau de bord{% endblock %}

{% block content %}
<div class="mb-8">
    <h2 class="text-3xl font-bold mb-2" style="color: #B8941E;">Tableau de bord</h2>
    <p class="text-gray-400">Gérez le contenu et les images de votre site</p>
</div>

<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <div class="bg-gray-800 rounded-lg p-6" style="border-left: 4px solid #B8941E;">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-gray-400 text-sm">Sections de contenu</p>
                <p class="text-3xl font-bold mt-2">{{ stats.total_sections }}</p>
            </div>
            <i class="fas fa-file-alt text-4xl" style="color: #B8941E;"></i>
        </div>
    </div>
    
    <div class="bg-gray-800 rounded-lg p-6" style="border-left: 4px solid #B8941E;">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-gray-400 text-sm">Images</p>
                <p class="text-3xl font-bold mt-2">{{ stats.total_images }}</p>
            </div>
            <i class="fas fa-images text-4xl" style="color: #B8941E;"></i>
        </div>
    </div>
    
    <div class="bg-gray-800 rounded-lg p-6" style="border-left: 4px solid #B8941E;">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-gray-400 text-sm">Param&egrave;tres</p>
                <a href="{{ url_for('admin.seo_settings') }}" class="text-sm mt-2 block" style="color: #B8941E;">Param&egrave;tres SEO →</a>
                <a href="{{ url_for('admin.site_settings') }}" class="text-sm mt-1 block" style="color: #B8941E;">Param&egrave;tres du Site →</a>
            </div>
            <i class="fas fa-cog text-4xl" style="color: #B8941E;"></i>
        </div>
    </div>
</div>

<div class="bg-gray-800 rounded-lg p-6 mb-8">
    <h3 class="text-xl font-bold mb-4">Sections de contenu</h3>
    <div class="space-y-3">
        {% for section in sections %}
        <a href="{{ url_for('admin.edit_content', section_slug=section.slug) }}" 
           class="block p-4 bg-gray-700 rounded hover:bg-gray-600 transition">
            <div class="flex items-center justify-between">
                <div>
                    <h4 class="font-semibold">{{ section.name }}</h4>
                    <p class="text-sm text-gray-400">{{ section.description or 'Aucune description' }}</p>
                </div>
                <i class="fas fa-chevron-right" style="color: #B8941E;"></i>
            </div>
        </a>
        {% endfor %}
    </div>
</div>

{% if recent_images %}
<div class="bg-gray-800 rounded-lg p-6">
    <h3 class="text-xl font-bold mb-4">Images récentes</h3>
    <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
        {% for image in recent_images %}
        <div class="relative group">
            <img src="{{ image.to_dict().url }}" alt="{{ image.alt_text }}" 
                 class="w-full h-32 object-cover rounded">
            <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-70 transition flex items-center justify-center opacity-0 group-hover:opacity-100">
                <p class="text-xs text-center px-2">{{ image.original_name }}</p>
            </div>
        </div>
        {% endfor %}
    </div>
    <a href="{{ url_for('admin.images') }}" class="inline-block mt-4 text-sm" style="color: #B8941E;">
        Voir toutes les images →
    </a>
</div>
{% endif %}
{% endblock %}
