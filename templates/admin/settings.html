{% extends "admin/base.html" %}

{% block title %}Param&egrave;tres du Site{% endblock %}

{% block content %}
<div class="mb-8">
    <h2 class="text-3xl font-bold mb-2 text-accent">Param&egrave;tres du Site</h2>
    <p class="text-gray-400">Configurez les informations g&eacute;n&eacute;rales de votre site</p>
</div>

<form method="POST" class="space-y-8">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    
    <div class="bg-gray-800 rounded-lg p-6">
        <h3 class="text-xl font-bold mb-4 text-accent">
            <i class="fas fa-building mr-2"></i>Informations de l'Entreprise
        </h3>
        
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium mb-2">Nom du site</label>
                <input type="text" 
                       name="site_name" 
                       value="{{ settings.site_name }}"
                       class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                       placeholder="KANSOTEX">
            </div>
            
            <div>
                <label class="block text-sm font-medium mb-2">Logo du site (URL)</label>
                <input type="text" 
                       name="site_logo" 
                       value="{{ settings.site_logo }}"
                       class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                       placeholder="/static/images/logo.png">
                <p class="text-xs text-gray-500 mt-1">URL ou chemin vers le logo du site</p>
            </div>
            
            <div>
                <label class="block text-sm font-medium mb-2">Adresse de l'entreprise</label>
                <textarea name="company_address" 
                          rows="2"
                          class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                          placeholder="Votre adresse compl&egrave;te">{{ settings.company_address }}</textarea>
            </div>
            
            <div>
                <label class="block text-sm font-medium mb-2">T&eacute;l&eacute;phone</label>
                <input type="text" 
                       name="company_phone" 
                       value="{{ settings.company_phone }}"
                       class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                       placeholder="+212 50 898 989">
            </div>
            
            <div>
                <label class="block text-sm font-medium mb-2">Email</label>
                <input type="email" 
                       name="company_email" 
                       value="{{ settings.company_email }}"
                       class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                       placeholder="contact@kansotex.com">
            </div>
            
            <div>
                <label class="block text-sm font-medium mb-2">ICE</label>
                <input type="text" 
                       name="company_ice" 
                       value="{{ settings.company_ice }}"
                       class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                       placeholder="002323065B06">
            </div>
        </div>
    </div>
    
    <div class="bg-gray-800 rounded-lg p-6">
        <h3 class="text-xl font-bold mb-4 text-accent">
            <i class="fas fa-palette mr-2"></i>Th&egrave;me de Couleur
        </h3>
        
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium mb-2">Palette de couleurs du site</label>
                <select name="color_theme" 
                        class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none">
                    <option value="gold" {% if settings.color_theme == 'gold' %}selected{% endif %}>Or (Noir, Or, Blanc)</option>
                    <option value="silver" {% if settings.color_theme == 'silver' %}selected{% endif %}>Argent (Noir, Blanc)</option>
                </select>
                <p class="text-xs text-gray-500 mt-1">Choisissez la palette de couleurs principale du site</p>
            </div>
        </div>
    </div>
    
    <div class="bg-gray-800 rounded-lg p-6">
        <h3 class="text-xl font-bold mb-4 text-accent">
            <i class="fas fa-envelope mr-2"></i>Configuration Email
        </h3>
        
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium mb-2">Email de destination pour les formulaires de contact</label>
                <input type="email" 
                       name="contact_recipient_email" 
                       value="{{ settings.contact_recipient_email }}"
                       class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                       placeholder="contact@votreentreprise.com">
                <p class="text-xs text-gray-500 mt-1">Les messages du formulaire de contact seront envoy&eacute;s &agrave; cette adresse</p>
            </div>
            
            <div class="border-t border-gray-700 pt-4 mt-4">
                <h4 class="font-bold mb-3 text-accent-light">Param&egrave;tres SMTP</h4>
                
                <div class="space-y-3">
                    <div>
                        <label class="block text-sm font-medium mb-2">Serveur SMTP</label>
                        <input type="text" 
                               name="smtp_host" 
                               value="{{ settings.smtp_host }}"
                               class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                               placeholder="smtp.gmail.com">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">Port SMTP</label>
                        <input type="number" 
                               name="smtp_port" 
                               value="{{ settings.smtp_port }}"
                               class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                               placeholder="587">
                        <p class="text-xs text-gray-500 mt-1">Port standard : 587 (TLS) ou 465 (SSL)</p>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">Utiliser TLS</label>
                        <select name="smtp_use_tls" 
                                class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none">
                            <option value="true" {% if settings.smtp_use_tls == 'true' %}selected{% endif %}>Oui</option>
                            <option value="false" {% if settings.smtp_use_tls == 'false' %}selected{% endif %}>Non</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">Email exp&eacute;diteur</label>
                        <input type="email" 
                               name="smtp_sender_email" 
                               value="{{ settings.smtp_sender_email }}"
                               class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                               placeholder="noreply@votreentreprise.com">
                        <p class="text-xs text-gray-500 mt-1">Adresse email qui appara√Ætra comme exp&eacute;diteur</p>
                    </div>
                    
                    <div class="bg-gray-700 rounded p-4 mt-3">
                        <h5 class="font-bold mb-2 text-yellow-400"><i class="fas fa-lock mr-2"></i>Credentials SMTP (S&eacute;curis&eacute;s)</h5>
                        <p class="text-sm text-gray-300 mb-2">Les credentials SMTP (nom d'utilisateur et mot de passe) sont stock&eacute;s de mani&egrave;re s&eacute;curis&eacute;e dans les variables d'environnement :</p>
                        <ul class="text-sm text-gray-400 space-y-1 list-disc list-inside">
                            <li><code class="bg-gray-800 px-2 py-1 rounded">SMTP_USERNAME</code> - Nom d'utilisateur SMTP</li>
                            <li><code class="bg-gray-800 px-2 py-1 rounded">SMTP_PASSWORD</code> - Mot de passe SMTP</li>
                        </ul>
                        <p class="text-xs text-gray-500 mt-2">Configurez ces variables dans l'onglet "Secrets" de Replit pour activer l'envoi d'emails.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="bg-gray-800 rounded-lg p-6">
        <h3 class="text-xl font-bold mb-4 text-accent">
            <i class="fas fa-share-alt mr-2"></i>R&eacute;seaux Sociaux
        </h3>
        
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium mb-2">
                    <i class="fab fa-facebook mr-2"></i>Facebook
                </label>
                <input type="url" 
                       name="facebook_url" 
                       value="{{ settings.facebook_url }}"
                       class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                       placeholder="https://facebook.com/votre-page">
            </div>
            
            <div>
                <label class="block text-sm font-medium mb-2">
                    <i class="fab fa-instagram mr-2"></i>Instagram
                </label>
                <input type="url" 
                       name="instagram_url" 
                       value="{{ settings.instagram_url }}"
                       class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                       placeholder="https://instagram.com/votre-compte">
            </div>
            
            <div>
                <label class="block text-sm font-medium mb-2">
                    <i class="fab fa-linkedin mr-2"></i>LinkedIn
                </label>
                <input type="url" 
                       name="linkedin_url" 
                       value="{{ settings.linkedin_url }}"
                       class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                       placeholder="https://linkedin.com/company/votre-entreprise">
            </div>
            
            <div>
                <label class="block text-sm font-medium mb-2">
                    <i class="fab fa-twitter mr-2"></i>Twitter / X
                </label>
                <input type="url" 
                       name="twitter_url" 
                       value="{{ settings.twitter_url }}"
                       class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                       placeholder="https://twitter.com/votre-compte">
            </div>
        </div>
    </div>
    
    <div class="flex justify-end space-x-4">
        <a href="{{ url_for('admin.dashboard') }}" 
           class="px-6 py-2 bg-gray-700 rounded hover:bg-gray-600 transition">
            Annuler
        </a>
        <button type="submit" 
                class="px-6 py-2 rounded transition bg-accent-gradient">
            <i class="fas fa-save mr-2"></i>Enregistrer les param&egrave;tres
        </button>
    </div>
</form>
{% endblock %}
