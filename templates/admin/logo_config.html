{% extends "admin/base.html" %}

{% block title %}Configuration du Logo{% endblock %}

{% block content %}
<div class="mb-8">
    <h2 class="text-3xl font-bold mb-2 text-accent">Configuration du Logo</h2>
    <p class="text-gray-400">Gérez l'affichage du logo (texte ou image) avec support bilingue et thèmes</p>
</div>

<form method="POST" class="space-y-8">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    
    <div class="bg-gray-800 rounded-lg p-6">
        <h3 class="text-xl font-bold mb-4 text-accent">
            <i class="fas fa-image mr-2"></i>Mode de Logo
        </h3>
        
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium mb-2">Type de logo</label>
                <select name="mode" 
                        id="logo-mode"
                        class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none">
                    <option value="text" {% if logo_config.mode == 'text' %}selected{% endif %}>Texte</option>
                    <option value="image" {% if logo_config.mode == 'image' %}selected{% endif %}>Image</option>
                </select>
                <p class="text-xs text-gray-500 mt-1">Choisissez entre texte ou image pour le logo</p>
            </div>
        </div>
    </div>
    
    <!-- Text Logo Configuration -->
    <div id="text-config" class="bg-gray-800 rounded-lg p-6">
        <h3 class="text-xl font-bold mb-4 text-accent">
            <i class="fas fa-font mr-2"></i>Configuration du Logo Texte
        </h3>
        
        <div class="grid grid-cols-2 gap-6">
            <!-- Dark Theme -->
            <div class="space-y-4">
                <h4 class="font-semibold text-gray-300">Thème Sombre (Dark)</h4>
                <div>
                    <label class="block text-sm font-medium mb-2">Texte FR</label>
                    <input type="text" 
                           name="text_dark_fr" 
                           value="{{ logo_config.text.dark.fr }}"
                           class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                           placeholder="KANSOTEX">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Texte EN</label>
                    <input type="text" 
                           name="text_dark_en" 
                           value="{{ logo_config.text.dark.en }}"
                           class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                           placeholder="KANSOTEX">
                </div>
            </div>
            
            <!-- Light Theme -->
            <div class="space-y-4">
                <h4 class="font-semibold text-gray-300">Thème Clair (Light)</h4>
                <div>
                    <label class="block text-sm font-medium mb-2">Texte FR</label>
                    <input type="text" 
                           name="text_light_fr" 
                           value="{{ logo_config.text.light.fr }}"
                           class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                           placeholder="KANSOTEX">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Texte EN</label>
                    <input type="text" 
                           name="text_light_en" 
                           value="{{ logo_config.text.light.en }}"
                           class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                           placeholder="KANSOTEX">
                </div>
            </div>
        </div>
    </div>
    
    <!-- Image Logo Configuration -->
    <div id="image-config" class="bg-gray-800 rounded-lg p-6">
        <h3 class="text-xl font-bold mb-4 text-accent">
            <i class="fas fa-images mr-2"></i>Configuration du Logo Image
        </h3>
        
        <div class="grid grid-cols-2 gap-6">
            <!-- Dark Theme Logo -->
            <div class="space-y-4">
                <h4 class="font-semibold text-gray-300">Logo pour Thème Sombre</h4>
                <div>
                    <label class="block text-sm font-medium mb-2">Sélectionner l'image</label>
                    <select name="image_dark_id" 
                            class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none">
                        <option value="">-- Aucune image --</option>
                        {% for image in images %}
                        <option value="{{ image.id }}" {% if logo_config.images.dark_id == image.id %}selected{% endif %}>
                            {{ image.original_name }}
                        </option>
                        {% endfor %}
                    </select>
                    {% if logo_config.images.dark_id %}
                    <div class="mt-3">
                        <img src="{{ logo_config.images.dark_id | image_url }}" alt="Logo Dark" class="h-20 bg-gray-900 p-2 rounded">
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Light Theme Logo -->
            <div class="space-y-4">
                <h4 class="font-semibold text-gray-300">Logo pour Thème Clair</h4>
                <div>
                    <label class="block text-sm font-medium mb-2">Sélectionner l'image</label>
                    <select name="image_light_id" 
                            class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none">
                        <option value="">-- Aucune image --</option>
                        {% for image in images %}
                        <option value="{{ image.id }}" {% if logo_config.images.light_id == image.id %}selected{% endif %}>
                            {{ image.original_name }}
                        </option>
                        {% endfor %}
                    </select>
                    {% if logo_config.images.light_id %}
                    <div class="mt-3">
                        <img src="{{ logo_config.images.light_id | image_url }}" alt="Logo Light" class="h-20 bg-white p-2 rounded">
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="mt-6">
            <label class="block text-sm font-medium mb-2">Texte alternatif (ALT)</label>
            <input type="text" 
                   name="alt_text" 
                   value="{{ logo_config.alt_text }}"
                   class="w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 ring-accent focus:outline-none"
                   placeholder="Logo KANSOTEX">
            <p class="text-xs text-gray-500 mt-1">Texte affiché si l'image ne charge pas (important pour le SEO)</p>
        </div>
    </div>
    
    <div class="flex justify-end space-x-4">
        <a href="{{ url_for('admin.dashboard') }}" class="px-6 py-3 bg-gray-700 text-white rounded hover:bg-gray-600 transition">
            Annuler
        </a>
        <button type="submit" class="px-6 py-3 bg-accent text-black font-bold rounded hover:opacity-90 transition">
            <i class="fas fa-save mr-2"></i>Enregistrer
        </button>
    </div>
</form>

<script>
// Show/hide configurations based on mode
const modeSelect = document.getElementById('logo-mode');
const textConfig = document.getElementById('text-config');
const imageConfig = document.getElementById('image-config');

function updateConfigVisibility() {
    if (modeSelect.value === 'text') {
        textConfig.style.display = 'block';
        imageConfig.style.display = 'none';
    } else {
        textConfig.style.display = 'none';
        imageConfig.style.display = 'block';
    }
}

modeSelect.addEventListener('change', updateConfigVisibility);
updateConfigVisibility();
</script>

{% endblock %}
